<div :class="themeClass" class="full-page">
  <div class="container">
    <h1><strong>Lista de Usuarios</strong></h1>
    <hr />

    <div class="row mb-3 align-items-center">
      <div class="col-md-6">
        <label class="form-label"
          ><strong>Selecciona para ocultar/mostrar columnas</strong></label
        >

        <!--  COntrol de columnas -->
        <div class="column-toggles">
          <div class="form-check form-check-inline">
            <input
              type="checkbox"
              class="form-check-input"
              v-model="showColumn.id"
              id="toggleId" />
            <label class="form-check-label" for="toggleId">ID</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              type="checkbox"
              class="form-check-input"
              v-model="showColumn.nombreCompleto"
              id="toggleNombre" />
            <label class="form-check-label" for="toggleNombre"
              >Nombre Completo</label
            >
          </div>
          <div class="form-check form-check-inline">
            <input
              type="checkbox"
              class="form-check-input"
              v-model="showColumn.telefono"
              id="toggleTelefono" />
            <label class="form-check-label" for="toggleTelefono"
              >Telefono</label
            >
          </div>
          <div class="form-check form-check-inline">
            <input
              type="checkbox"
              class="form-check-input"
              v-model="showColumn.email"
              id="toggleEmail" />
            <label class="form-check-label" for="toggleEmail"
              >Correo Electronico</label
            >
          </div>
        </div>
      </div>

      <!-- Busqueda por nombre -->
      <div class="col-md-6">
        <div class="search-container">
          <input
            type="text"
            v-model="searchQuery"
            placeholder="Buscar por nombre"
            class="form-control"
            @input="handleSearch" />
          <i class="bi bi-search search-icon"></i>
        </div>
      </div>
    </div>

    <!-- DataTablev -->
    <div class="table-responsive data-table">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th
              v-if="showColumn.id"
              @click="sortTable('id')"
              class="sortable-header">
              # <i :class="getSortIcon('id')"></i>
            </th>
            <th
              v-if="showColumn.nombreCompleto"
              @click="sortTable('nombreCompleto')"
              class="sortable-header">
              Nombre Completo <i :class="getSortIcon('nombreCompleto')"></i>
            </th>
            <th
              v-if="showColumn.telefono"
              @click="sortTable('telefono')"
              class="sortable-header">
              Telefono <i :class="getSortIcon('telefono')"></i>
            </th>
            <th
              v-if="showColumn.email"
              @click="sortTable('email')"
              class="sortable-header">
              Correo Electronico <i :class="getSortIcon('email')"></i>
            </th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="(user, index) in paginatedData" :key="user.id">
            <td v-if="showColumn.id">{{ user.id }}</td>
            <td v-if="showColumn.nombreCompleto">{{ user.nombreCompleto }}</td>
            <td v-if="showColumn.telefono">{{ user.telefono }}</td>
            <td v-if="showColumn.email">{{ user.email }}</td>
            <td>
              <div class="btn-group">
                <button
                  @click="deleteUser(index)"
                  class="btn btn-danger btn-sm">
                  <i class="bi bi-trash"></i>
                </button>
                <button @click="openCamera" class="btn btn-info btn-sm ms-1">
                  <i class="bi bi-camera"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Paginacionn -->
    <PaginationModal
      :currentPage="currentPage"
      :totalPages="totalPages"
      :startIndex="startIndex"
      :endIndex="endIndex"
      :filteredUsers="filteredUsers"
      :displayedPages="displayedPages"
      @change-page="goToPage" />
  </div>

  <!-- Camara para realizar foto -->
  <camera-modal :show-camera="showCamera" @close-camera="showCamera = false">
  </camera-modal>
</div>
